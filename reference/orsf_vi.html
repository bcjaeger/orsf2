<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Estimate the importance of individual variables using oblique random
survival forests. orsf_vi() is a general purpose function to extract
or compute variable importance (VI) estimates from an aorsf object
(see orsf). The three functions orsf_vi_negate(), orsf_vi_permute(),
and orsf_vi_anova() are convenient wrappers for orsf_vi(). The
way these functions work depends on whether the object they are
given already has VI estimates in it or not (see examples)."><title>ORSF variable importance — orsf_vi • aorsf</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ORSF variable importance — orsf_vi"><meta property="og:description" content="Estimate the importance of individual variables using oblique random
survival forests. orsf_vi() is a general purpose function to extract
or compute variable importance (VI) estimates from an aorsf object
(see orsf). The three functions orsf_vi_negate(), orsf_vi_permute(),
and orsf_vi_anova() are convenient wrappers for orsf_vi(). The
way these functions work depends on whether the object they are
given already has VI estimates in it or not (see examples)."><meta property="og:image" content="https://bcjaeger.github.io/aorsf/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">aorsf</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/aorsf.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/pd.html">Compute partial dependence with ORSF</a>
    <a class="dropdown-item" href="../articles/oobag.html">Out-of-bag predictions and evaluation</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bcjaeger/aorsf/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>ORSF variable importance</h1>
      <small class="dont-index">Source: <a href="https://github.com/bcjaeger/aorsf/blob/HEAD/R/orsf_vi.R" class="external-link"><code>R/orsf_vi.R</code></a></small>
      <div class="d-none name"><code>orsf_vi.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Estimate the importance of individual variables using oblique random
survival forests. <code>orsf_vi()</code> is a general purpose function to extract
or compute variable importance (VI) estimates from an <code>aorsf</code> object
(see <a href="orsf.html">orsf</a>). The three functions <code>orsf_vi_negate()</code>, <code>orsf_vi_permute()</code>,
and <code>orsf_vi_anova()</code> are convenient wrappers for <code>orsf_vi()</code>. The
way these functions work depends on whether the <code>object</code> they are
given already has VI estimates in it or not (see examples).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">orsf_vi</span><span class="op">(</span><span class="va">object</span>, group_factors <span class="op">=</span> <span class="cn">TRUE</span>, importance <span class="op">=</span> <span class="cn">NULL</span>, oobag_fun <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orsf_vi_negate</span><span class="op">(</span><span class="va">object</span>, group_factors <span class="op">=</span> <span class="cn">TRUE</span>, oobag_fun <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orsf_vi_permute</span><span class="op">(</span><span class="va">object</span>, group_factors <span class="op">=</span> <span class="cn">TRUE</span>, oobag_fun <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">orsf_vi_anova</span><span class="op">(</span><span class="va">object</span>, group_factors <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>an object of class 'aorsf'.</p></dd>


<dt>group_factors</dt>
<dd><p>(<em>logical</em>) if <code>TRUE</code>, the importance of factor
variables will be reported overall by aggregating the importance
of individual levels of the factor. If <code>FALSE</code>, the importance of
individual factor levels will be returned.</p></dd>


<dt>importance</dt>
<dd><p>(<em>character</em>) Indicate method for variable importance:</p><ul><li><p>'none': no variable importance is computed.</p></li>
<li><p>'anova': use the analysis of variance (ANOVA) method</p></li>
<li><p>'negate': compute negation importance</p></li>
<li><p>'permute': compute permutation importance</p></li>
</ul></dd>


<dt>oobag_fun</dt>
<dd><p>(<em>function</em>) A function to be measure the accuracy of
out-of-bag predictions. When <code>oobag_fun</code> = <code>NULL</code> (the default),
out-of-bag predictions are evaluated using Harrell's C-statistic.
For more details see the
<a href="https://bcjaeger.github.io/aorsf/articles/oobag.html#user-supplied-out-of-bag-evaluation-functions">vignette</a>
on out-of-bag predictions:</p></dd>


<dt>...</dt>
<dd><p>Further arguments passed to or from other methods
(not currently used).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a named vector. Names indicate predictors, values indicate importance.
The vector is sorted from highest to lowest value, with higher values
indicating higher importance.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>negation importance</strong>: Each variable is assessed separately by
multiplying the variable's coefficients by -1 and then determining
how much the model's performance changes. The worse the model's
performance after negating coefficients for a given variable,
the more important the variable.</p>
<p><strong>permutation importance</strong>: Each variable is assessed separately by
randomly permuting the variable's values and then determining
how much the model's performance changes. The worse the model's
performance after permuting the values of a given variable,
the more important the variable.</p>
<p><strong>ANOVA importance</strong>: ANOVA importance computes a p-value for each
coefficient in each linear combination of variables in each decision
tree of an oblique random forest. Following the definition proposed by
Menze et al, ANOVA importance in aorsf for an individual variable is
the proportion of times a p-value for its coefficient is &lt; 0.01.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Menze, Bjoern H., et al. On oblique random forests.
<em>Joint European Conference on Machine Learning and Knowledge Discovery in Databases</em>.
Springer, Berlin, Heidelberg, 2011.
DOI: 10.1007/978-3-642-23783-6_29</p>
<p>Jaeger BC, Welden S, Lenoir K, Speiser JL, Segar MW, Pandey A, Pajewski NM.
<em>Accelerated and interpretable oblique random survival forests.</em>
arXiv e-prints. 2022 Aug 3:arXiv-2208. URL: https://arxiv.org/abs/2208.01129</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># first workflow -------------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># fit an aorsf object using default values, and get the default vi (anova)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit_default</span> <span class="op">&lt;-</span> <span class="fu"><a href="orsf.html">orsf</a></span><span class="op">(</span><span class="va">pbc_orsf</span>,</span></span>
<span class="r-in"><span>                    <span class="fu">Surv</span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">.</span> <span class="op">-</span> <span class="va">id</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the printed output will indicate the type of vi used</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit_default</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---------- Oblique random survival forest</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           N observations: 276</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                 N events: 111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  N trees: 500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       N predictors total: 17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    N predictors per node: 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Average leaves per tree: 24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Min observations in leaf: 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       Min events in leaf: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           OOB stat value: 0.84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            OOB stat type: Harrell's C-statistic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Variable importance: anova</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -----------------------------------------</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># the 'raw' vi values are stored in fit_default:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit_default</span><span class="op">$</span><span class="va">importance</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     edema_1   ascites_1        bili      copper     albumin       stage </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.34080109  0.29821074  0.24717922  0.17018538  0.14992351  0.14289632 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         age    hepato_1   spiders_1   edema_0.5     protime        chol </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.13376623  0.12700409  0.12621056  0.12373505  0.12209150  0.11686275 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       sex_f         ast        trig    alk.phos trt_placebo    platelet </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.10812672  0.10229701  0.07247899  0.06910352  0.05763534  0.04834996 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># these are 'raw' because the vi values for factors have not been</span></span></span>
<span class="r-in"><span><span class="co"># aggregated into a single vi value. Currently there is one vi value</span></span></span>
<span class="r-in"><span><span class="co"># for k-1 levels of a k level factor. For example, you can see edema_1</span></span></span>
<span class="r-in"><span><span class="co"># and edema_0.5 in the importance values above because edema is a factor</span></span></span>
<span class="r-in"><span><span class="co"># variable with levels of 0, 0.5, and 1. To get aggregated values of vi</span></span></span>
<span class="r-in"><span><span class="co"># across all levels of each factor, just call orsf_vi with group_factors</span></span></span>
<span class="r-in"><span><span class="co"># set to TRUE (the default)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">orsf_vi</span><span class="op">(</span><span class="va">fit_default</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ascites       bili      edema     copper    albumin      stage        age </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.29821074 0.24717922 0.21159511 0.17018538 0.14992351 0.14289632 0.13376623 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     hepato    spiders    protime       chol        sex        ast       trig </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.12700409 0.12621056 0.12209150 0.11686275 0.10812672 0.10229701 0.07247899 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   alk.phos        trt   platelet </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.06910352 0.05763534 0.04834996 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># orsf_vi knows that fit_default was fit using anova vi</span></span></span>
<span class="r-in"><span><span class="co"># to verify this, see that orsf_vi and orsf_vi_anova are the same</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">orsf_vi_anova</span><span class="op">(</span><span class="va">fit_default</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ascites       bili      edema     copper    albumin      stage        age </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.29821074 0.24717922 0.21159511 0.17018538 0.14992351 0.14289632 0.13376623 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     hepato    spiders    protime       chol        sex        ast       trig </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.12700409 0.12621056 0.12209150 0.11686275 0.10812672 0.10229701 0.07247899 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   alk.phos        trt   platelet </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.06910352 0.05763534 0.04834996 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># second workflow ------------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># fit an aorsf object without vi, then add vi later</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit_no_vi</span> <span class="op">&lt;-</span> <span class="fu"><a href="orsf.html">orsf</a></span><span class="op">(</span><span class="va">pbc_orsf</span>,</span></span>
<span class="r-in"><span>                  <span class="fu">Surv</span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">.</span> <span class="op">-</span> <span class="va">id</span>,</span></span>
<span class="r-in"><span>                  importance <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note: you can't call orsf_vi_anova() on fit_no_vi because anova</span></span></span>
<span class="r-in"><span><span class="co"># VI can only be computed while the forest is being grown.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">orsf_vi_negate</span><span class="op">(</span><span class="va">fit_no_vi</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          bili           age       protime           sex        copper </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0165138571  0.0155761617  0.0092727652  0.0086476349  0.0065117733 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       ascites        hepato           ast         stage         edema </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0047405710  0.0045321942  0.0033861221  0.0028651802  0.0028589786 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       spiders      platelet          chol           trt       albumin </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0021358616  0.0007814128 -0.0003646593 -0.0010418837 -0.0017191081 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          trig      alk.phos </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -0.0031777454 -0.0033861221 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">orsf_vi_permute</span><span class="op">(</span><span class="va">fit_no_vi</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          bili           age        copper       protime       ascites </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0121379454  0.0109397791  0.0055740779  0.0046363826  0.0040633465 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         stage        hepato      platelet         edema           ast </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0022921442  0.0020837675  0.0017712023  0.0013023547  0.0011981663 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       spiders       albumin           trt      alk.phos          chol </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0006772244  0.0004688477 -0.0004688477 -0.0010939779 -0.0011981663 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          trig           sex </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -0.0020316733 -0.0021358616 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># third workflow ------------------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co"># fit an aorsf object and compute vi at the same time</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit_permute_vi</span> <span class="op">&lt;-</span> <span class="fu"><a href="orsf.html">orsf</a></span><span class="op">(</span><span class="va">pbc_orsf</span>,</span></span>
<span class="r-in"><span>                       <span class="fu">Surv</span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">.</span> <span class="op">-</span> <span class="va">id</span>,</span></span>
<span class="r-in"><span>                       importance <span class="op">=</span> <span class="st">'permute'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get the vi instantly (i.e., it doesn't need to be computed again)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">orsf_vi_permute</span><span class="op">(</span><span class="va">fit_permute_vi</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           age         stage          bili        copper       ascites </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0103667431  0.0072410919  0.0070327151  0.0062513024  0.0044801000 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       protime           ast       albumin      platelet          chol </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0039070640  0.0036465930  0.0030214628  0.0016149198  0.0015107314 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         edema        hepato           sex          trig       spiders </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0005420276  0.0004688477 -0.0003646593 -0.0006772244 -0.0009376954 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      alk.phos           trt </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -0.0019274849 -0.0021879558 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can still get negation vi from this fit, but it needs to be computed</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">orsf_vi_negate</span><span class="op">(</span><span class="va">fit_permute_vi</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          bili           age           sex           ast        copper </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0146384663  0.0114607210  0.0092206710  0.0060950198  0.0058866431 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       ascites       protime         stage       albumin       spiders </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0051052303  0.0048968535  0.0033861221  0.0033340279  0.0030214628 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         edema        hepato      alk.phos      platelet           trt </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  0.0013991010 -0.0002083767 -0.0005730360 -0.0008856012 -0.0021879558 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          chol </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -0.0022921442 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Byron Jaeger.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

